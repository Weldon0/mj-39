{"version":3,"file":"js/348.a1bbcd3e.js","mappings":"8KAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,+BAA+B,CAACF,EAAG,IAAI,CAACG,MAAM,CAAEC,OAAuB,gBAAfN,EAAIO,QAA2BC,MAAM,CAAC,KAAO,gBAAgBC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,aAAa,cAAc,IAAI,CAACX,EAAIY,GAAG,QAAQV,EAAG,IAAI,CAACG,MAAM,CAAEC,OAAuB,OAAfN,EAAIO,QAAkBC,MAAM,CAAC,KAAO,gBAAgBC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,aAAa,KAAK,IAAI,CAACX,EAAIY,GAAG,QAAQZ,EAAIa,GAAG,KAAKX,EAAG,WAAW,CAACM,MAAM,CAAC,gBAAgB,WAAW,SAAWR,EAAIc,UAAUL,GAAG,CAAC,KAAOT,EAAIe,QAAQC,MAAM,CAACC,MAAOjB,EAAIkB,QAASC,SAAS,SAAUC,GAAMpB,EAAIkB,QAAQE,CAAG,EAAEC,WAAW,YAAYrB,EAAIsB,GAAItB,EAAIuB,MAAM,SAASC,GAAM,OAAOtB,EAAG,eAAe,CAACuB,IAAID,EAAKE,GAAGlB,MAAM,CAAC,KAAOgB,IAAO,IAAG,IAAI,EAClxB,EACIG,EAAkB,CAAC,WAAY,IAAI3B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACM,MAAM,CAAC,IAAM,kDAAkD,IAAM,OACrL,G,UC+BA,GACAoB,KAAAA,eACAC,OACA,OACAN,KAAAA,GACAO,QAAAA,EACAZ,SAAAA,EACAJ,UAAAA,EACAP,OAAAA,cAEA,EACA,kBACAwB,QAAAA,CACApB,aAAAA,GACA,cAGA,eACA,aACA,iBACA,gBACA,aACA,EAGA,eAIA,uBACAmB,QAAAA,KAAAA,QACAvB,OAAAA,KAAAA,SAIA,wCAEA,eAEA,gBAGA,gCACA,iBAEA,IC/EuP,I,UCQnPyB,GAAY,OACd,EACAjC,EACA4B,GACA,EACA,KACA,WACA,MAIF,EAAeK,EAAiB,O,8LCjBzB,MAAMC,EAAkBC,IACtBC,EAAAA,EAAAA,GAAQ,CACbC,OAAQ,MACRC,IAAK,mBAELC,OAAQ,CACNR,QAASI,EAAIJ,QACbS,SAAU,GACVhC,OAAQ2B,EAAI3B,UAMLiC,EAAsBC,IAC1BN,EAAAA,EAAAA,GAAQ,CACbC,OAAQ,MACRC,IAAK,sBACLC,OAAQ,CACNI,QAAS,EACTH,SAAU,GACVE,UAMOE,EAAkBF,IACtBN,EAAAA,EAAAA,GAAQ,CACbC,OAAQ,MACRC,IAAK,sBACLC,OAAQ,CACNI,QAAS,EACTH,SAAU,GACVE,UAMOG,EAAoBlB,GACxBS,EAAAA,EAAAA,IAAY,iBAAkB,CACnCG,OAAQ,CACNZ,QAMOmB,EAAcnB,GAClBS,EAAAA,EAAAA,KAAa,gBAAiB,CACnCT,KACAgB,QAAS,IAKAI,EAAiBpB,GACrBS,EAAAA,EAAAA,KAAa,gBAAiB,CACnCT,KACAgB,QAAS,G","sources":["webpack://hm-vant-h5-lesson/./src/views/article.vue","webpack://hm-vant-h5-lesson/src/views/article.vue","webpack://hm-vant-h5-lesson/./src/views/article.vue?6390","webpack://hm-vant-h5-lesson/./src/views/article.vue?9d0d","webpack://hm-vant-h5-lesson/./src/api/article.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-page\"},[_c('nav',{staticClass:\"my-nav van-hairline--bottom\"},[_c('a',{class:{ active: _vm.sorter === 'weight_desc' },attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.changeSorter('weight_desc')}}},[_vm._v(\"推荐\")]),_c('a',{class:{ active: _vm.sorter === null },attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.changeSorter(null)}}},[_vm._v(\"最新\")]),_vm._m(0)]),_c('van-list',{attrs:{\"finished-text\":\"没有更多了111\",\"finished\":_vm.finished},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('article-item',{key:item.id,attrs:{\"item\":item}})}),1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logo\"},[_c('img',{attrs:{\"src\":\"http://weldon.net.cn/mj-m/img/logo.dbd40807.png\",\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"article-page\">\n    <nav class=\"my-nav van-hairline--bottom\">\n      <a\n        href=\"javascript:;\"\n        :class=\"{ active: sorter === 'weight_desc' }\"\n        @click=\"changeSorter('weight_desc')\"\n        >推荐</a\n      >\n      <a\n        :class=\"{ active: sorter === null }\"\n        href=\"javascript:;\"\n        @click=\"changeSorter(null)\"\n        >最新</a\n      >\n      <div class=\"logo\">\n        <img src=\"http://weldon.net.cn/mj-m/img/logo.dbd40807.png\" alt=\"\" />\n      </div>\n    </nav>\n    <!--load事件触发时机：内容没有撑起页面的时候，或者滚动到底部的时候(自动触发)-->\n    <van-list\n      finished-text=\"没有更多了111\"\n      :finished=\"finished\"\n      v-model=\"loading\"\n      @load=\"onLoad\"\n    >\n      <article-item :item=\"item\" v-for=\"item in list\" :key=\"item.id\" />\n    </van-list>\n  </div>\n</template>\n\n<script>\nimport { getArticleList } from \"@/api/article\";\n\nexport default {\n  name: \"article-page\",\n  data() {\n    return {\n      list: [],\n      current: 1,\n      loading: false,\n      finished: false,\n      sorter: \"weight_desc\",\n    };\n  },\n  async created() {},\n  methods: {\n    changeSorter(type) {\n      this.sorter = type;\n\n      // 重新请求数据了 ==> 重置所有的状态\n      this.current = 1; // 第一页开始请求\n      this.list = []; // 把原有的数据清空\n      this.finished = false; // 数据没有请求完毕\n      this.loading = true; // 开始请求数据，节流阀开启\n      this.onLoad(); // 请求数据\n    },\n    // 1、只要load事件触发，list组件内部就会自动把loading设置为true，表示正在请求当中，此时load事件不会重复触发\n    // 2、数据请求完毕，需要关闭loading，为了后续页面下拉的时候可以继续发起请求\n    async onLoad() {\n      // 只要load这个事件触发，list组件内部就会自动把loading设置为true\n      // 加载更多数据\n      // 掉接口\n      const res = await getArticleList({\n        current: this.current,\n        sorter: this.sorter, // 数据的类型\n      });\n      // 一直把上一次的数据直接替换了\n      // 把新获取的数据和老的数据进行拼接复制给list(老的数据也需要展示)\n      this.list = [...this.list, ...res.data.rows];\n      // 让请求的current自增\n      this.current++;\n      // 请求完毕的时候，让loading变成false，load事件才会后续触发\n      this.loading = false;\n\n      // 数据加载完的时候，finished变成true, 表示没有更多数据了\n      if (this.current > res.data.pageTotal) {\n        this.finished = true;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.article-page {\n  margin-bottom: 50px;\n  margin-top: 44px;\n  .my-nav {\n    height: 44px;\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 999;\n    background: #fff;\n    display: flex;\n    align-items: center;\n    > a {\n      color: #999;\n      font-size: 14px;\n      line-height: 44px;\n      margin-left: 20px;\n      position: relative;\n      transition: all 0.3s;\n      &::after {\n        content: \"\";\n        position: absolute;\n        left: 50%;\n        transform: translateX(-50%);\n        bottom: 0;\n        width: 0;\n        height: 2px;\n        background: #222;\n        transition: all 0.3s;\n      }\n      &.active {\n        color: #222;\n        &::after {\n          width: 14px;\n        }\n      }\n    }\n    .logo {\n      flex: 1;\n      display: flex;\n      justify-content: flex-end;\n      > img {\n        width: 64px;\n        height: 28px;\n        display: block;\n        margin-right: 10px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article.vue?vue&type=template&id=570f919d&scoped=true&\"\nimport script from \"./article.vue?vue&type=script&lang=js&\"\nexport * from \"./article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./article.vue?vue&type=style&index=0&id=570f919d&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"570f919d\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n\nexport const getArticleList = (obj) => {\n  return request({\n    method: \"GET\",\n    url: \"/interview/query\",\n    // get请求的参数放到params配置项里面\n    params: {\n      current: obj.current, // 获取第几页的数据\n      pageSize: 10, // 每页多少条\n      sorter: obj.sorter, // 排序方式，weight_desc获取推荐列表数据\n    },\n  });\n};\n\n// 收藏的列表\nexport const getArticlesCollect = (page) => {\n  return request({\n    method: \"GET\",\n    url: \"/interview/opt/list\",\n    params: {\n      optType: 2,\n      pageSize: 10,\n      page,\n    },\n  });\n};\n\n// 喜欢文章的列表\nexport const getLikeArticle = (page) => {\n  return request({\n    method: \"GET\",\n    url: \"/interview/opt/list\",\n    params: {\n      optType: 1, // 1为喜欢  2为收藏\n      pageSize: 10,\n      page,\n    },\n  });\n};\n\n// 获取文章详情的接口\nexport const getArticleDetail = (id) => {\n  return request.get(\"interview/show\", {\n    params: {\n      id,\n    },\n  });\n};\n\n// 点击喜欢的接口\nexport const updateLike = (id) => {\n  return request.post(\"interview/opt\", {\n    id,\n    optType: 1, // 喜欢\n  });\n};\n\n// 点击收藏的接口\nexport const updateCollect = (id) => {\n  return request.post(\"interview/opt\", {\n    id,\n    optType: 2, // 收藏\n  });\n};\n"],"names":["render","_vm","this","_c","_self","staticClass","class","active","sorter","attrs","on","$event","changeSorter","_v","_m","finished","onLoad","model","value","loading","callback","$$v","expression","_l","list","item","key","id","staticRenderFns","name","data","current","methods","component","getArticleList","obj","request","method","url","params","pageSize","getArticlesCollect","page","optType","getLikeArticle","getArticleDetail","updateLike","updateCollect"],"sourceRoot":""}